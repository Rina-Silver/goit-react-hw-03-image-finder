{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","App.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.jsx","components/ImageGallery/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Loader/Loader.js","components/Button/Button.jsx","components/Modal/Modal.jsx","helper/mapper.js","services/pixabay-api.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","value","handleValueChange","e","setState","currentTarget","toLowerCase","handleSubmit","preventDefault","trim","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","props","onSubmit","className","s","SearchForm","this","type","SearchForm_button","SearchForm_button_label","SearchForm_input","placeholder","autoComplete","autoFocus","onChange","Component","ImageGalleryItem","id","src","srcLarge","onOpenModal","onClick","alt","ImageGalleryItem__image","ImageGallery","images","map","webformatURL","largeImageURL","centeredLoader","textAlign","loader","style","color","height","width","timeout","Button","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","imageModal","mapper","fetchPixabayImg","query","page","fetch","then","res","ok","json","Promise","reject","Error","App","showModal","showSpinner","changeInputValue","getImages","API","prevState","hits","length","warn","catch","finally","scrollTo","toggleModal","onClickImg","clickLoadMore","top","documentElement","scrollHeight","behavior","prevProps","newestOnTop","rtl","pauseOnFocusLoss","Loader","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8dcded30.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__5Uepw\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__1krf5\",\"ImageGalleryItem__image\":\"ImageGallery_ImageGalleryItem__image__x38nH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3iGUr\",\"Modal\":\"Modal_Modal__2nPW3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__QB9PV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2KQzq\"};","import { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    value: '',\r\n  };\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n    value: PropTypes.string,\r\n  };\r\n\r\n  handleValueChange = e => {\r\n    this.setState({ value: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const { value } = this.state;\r\n    if (value.trim() === '') {\r\n      // console.log('–ù–µ –≤–≤–µ–¥–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ');\r\n      return toast.error('–ù–µ –≤–≤–µ–¥–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ', {\r\n        position: 'top-right',\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n    }\r\n    this.props.onSubmit(value);\r\n    this.setState({ value: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.SearchForm_button}>\r\n            <span className={s.SearchForm_button_label}>üêå</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchForm_input}\r\n            type=\"text\"\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.value}\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            onChange={this.handleValueChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport s from './ImageGallery.module.css';\r\n\r\nexport default function ImageGalleryItem({ id, src, srcLarge, onOpenModal }) {\r\n  // console.log(srcLarge);\r\n  return (\r\n    <li\r\n      className={s.ImageGalleryItem}\r\n      key={src}\r\n      onClick={() => onOpenModal({ srcLarge })}\r\n    >\r\n      <img\r\n        id={id}\r\n        src={src}\r\n        alt=\"Pic from Pixabay\"\r\n        className={s.ImageGalleryItem__image}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string,\r\n  srcLarge: PropTypes.string.isRequired,\r\n  onOpenModal: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGallery.module.css';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\n//rfc\r\nexport default function ImageGallery({ images, onOpenModal }) {\r\n  //console.log(images);\r\n  return (\r\n    <div>\r\n      <ul className={s.ImageGallery}>\r\n        {images.map(({ id, webformatURL, largeImageURL }) => (\r\n          <ImageGalleryItem\r\n            id={id}\r\n            src={webformatURL}\r\n            srcLarge={largeImageURL}\r\n            onOpenModal={onOpenModal}\r\n          />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      src: PropTypes.string.isRequired,\r\n      srcLarge: PropTypes.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  onOpenModal: PropTypes.func.isRequired,\r\n};\r\n","import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport Loader from 'react-loader-spinner';\r\nconst centeredLoader = {\r\n  textAlign: 'center',\r\n};\r\n\r\nconst loader = () => (\r\n  <div style={{ ...centeredLoader }}>\r\n    <Loader\r\n      type=\"TailSpin\"\r\n      color=\"#00BFFF\"\r\n      height={100}\r\n      width={100}\r\n      timeout={3000} //3 secs\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default loader;\r\n","import PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nconst Button = ({ images, onClick }) => {\r\n  return (\r\n    <button type=\"button\" className={s.Button} onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    imageModal: PropTypes.string,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.Modal}>\r\n          <img src={this.props.imageModal} alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n","export const mapper = images =>\r\n  images.map(({ id, largeImageURL, webformatURL }) => ({\r\n    id,\r\n    largeImageURL,\r\n    webformatURL,\r\n  }));\r\n","const BASE_URL =\r\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12';\r\nconst API_KEY = '23479775-7c8a7e565023089f3ce2cecd2';\r\n\r\nexport function fetchPixabayImg(query, page) {\r\n  return fetch(`${BASE_URL}&q=${query}&page=${page}&key=${API_KEY}`).then(\r\n    res => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(new Error(`–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫`));\r\n    },\r\n  );\r\n}\r\n","import React, { Component } from 'react';\nimport s from './App.module.css';\nimport Searchbar from 'components/Searchbar';\nimport ImageGallery from 'components/ImageGallery';\nimport Loader from 'components/Loader';\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { mapper } from './helper/mapper';\nimport * as API from './services/pixabay-api';\n\n//rcc\nexport default class App extends Component {\n  state = {\n    images: null,\n    query: '',\n    page: 1,\n    showModal: false,\n    showSpinner: false,\n    largeImageURL: '',\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.query !== this.state.query ||\n      prevState.page !== this.state.page\n    ) {\n      return this.getImages();\n    }\n  }\n\n  changeInputValue = query => {\n    this.setState({\n      query,\n      page: 1,\n      images: [],\n    });\n  };\n\n  getImages = () => {\n    const { query, page } = this.state;\n\n    this.setState({ showSpinner: true });\n\n    API.fetchPixabayImg(query, page)\n      .then(images => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...mapper(images.hits)],\n        }));\n        if (images.hits.length === 0) {\n          toast.warn(`–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`, {\n            position: 'top-right',\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            draggable: true,\n            progress: undefined,\n          });\n        }\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => {\n        this.setState({ showSpinner: false });\n        if (page > 1) {\n          this.scrollTo();\n        }\n      });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  onClickImg = imageModal => {\n    this.setState({ largeImageURL: imageModal.srcLarge });\n    this.toggleModal();\n  };\n\n  clickLoadMore = e => {\n    e.preventDefault();\n    this.setState(prevState => {\n      return { page: prevState.page + 1 };\n    });\n  };\n  scrollTo = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  render() {\n    const { images, showModal, showSpinner, largeImageURL, error } = this.state;\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.changeInputValue} />\n        <ToastContainer\n          position=\"top-right\"\n          autoClose={3000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n\n        {images && (\n          <ImageGallery images={images} onOpenModal={this.onClickImg} />\n        )}\n        {images && images.length >= 12 && (\n          <Button images={images} onClick={this.clickLoadMore} />\n        )}\n\n        {showSpinner && <Loader />}\n        {showModal && (\n          <Modal onClose={this.toggleModal} imageModal={largeImageURL} />\n        )}\n\n        {error &&\n          toast.error(`${error}`, {\n            position: 'top-right',\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            draggable: true,\n            progress: undefined,\n          })}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2Ksjd\",\"SearchForm\":\"Searchbar_SearchForm__1tNan\",\"SearchForm_button\":\"Searchbar_SearchForm_button__2OcRV\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__3QI6f\",\"SearchForm_input\":\"Searchbar_SearchForm_input__D-FDe\"};"],"sourceRoot":""}